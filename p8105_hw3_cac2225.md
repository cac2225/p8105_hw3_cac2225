p8105\_hw3\_cac2225
================
Courtney Chan
October 8, 2018

Problem 1
=========

First load dataset
------------------

``` r
library(p8105.datasets)
brfss_smart2010 = brfss_smart2010
```

``` r
library(tidyverse)
```

    ## -- Attaching packages ------------------------------- tidyverse 1.2.1 --

    ## v ggplot2 3.0.0     v purrr   0.2.5
    ## v tibble  1.4.2     v dplyr   0.7.6
    ## v tidyr   0.8.1     v stringr 1.3.1
    ## v readr   1.1.1     v forcats 0.3.0

    ## -- Conflicts ---------------------------------- tidyverse_conflicts() --
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(dplyr)
library(ggplot2)
```

To clean the dataset, the variable names will be cleaned using the janitor package, function clean\_names. Change the variable names as needed. The data is filtered based on topic, Overall Health, and responses Excellent to Poor. The response variable will be turned into a factor variable and its responses ordered.

``` r
brfss_smart2010 = janitor::clean_names(brfss_smart2010)

filtered_brfss_smart2010 = filter(brfss_smart2010, topic == "Overall Health") %>% 
  filter(response == "Excellent" | response == "Very Good" | response == "Good" | response == "Fair" | response == "Poor") %>% 
  mutate(response = factor(response, levels = str_c(c("Excellent", "Very Good", "Good", "Fair", "Poor"))))
```

``` r
filtered_brfss_smart2010 %>% 
  filter(year == "2002") %>% 
  distinct(locationdesc) %>% 
  separate(locationdesc, into = c("state", "county"), sep = "-") %>%   count(state) %>% 
  filter(n == 7)
```

    ## Warning: Expected 2 pieces. Additional pieces discarded in 1 rows [25].

    ## # A tibble: 3 x 2
    ##   state     n
    ##   <chr> <int>
    ## 1 "CT "     7
    ## 2 "FL "     7
    ## 3 "NC "     7

To determine how many states were observed at 7 county locations, the number of distinct state-county values were determined, these values were seperated, and the number of times each state occurred was counted. The states that were counted as having appeared 7 times were filtered out. The states are as follows: CT, FL and NC.

``` r
filtered_brfss_smart2010 %>% 
  filter(year == 2002:2010) %>% 
  group_by(locationabbr, locationdesc) %>% 
  summarize(num_counties = n()) 
```

    ## Warning in year == 2002:2010: longer object length is not a multiple of
    ## shorter object length

    ## # A tibble: 331 x 3
    ## # Groups:   locationabbr [?]
    ##    locationabbr locationdesc                      num_counties
    ##    <chr>        <chr>                                    <int>
    ##  1 AK           AK - Fairbanks North Star Borough            3
    ##  2 AL           AL - Jefferson County                        4
    ##  3 AL           AL - Mobile County                           2
    ##  4 AL           AL - Tuscaloosa County                       3
    ##  5 AR           AR - Benton County                           2
    ##  6 AR           AR - Pulaski County                          2
    ##  7 AR           AR - Washington County                       4
    ##  8 AZ           AZ - Cochise County                          1
    ##  9 AZ           AZ - Maricopa County                         3
    ## 10 AZ           AZ - Pima County                             5
    ## # ... with 321 more rows
